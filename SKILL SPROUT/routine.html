<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Daily Routine Matching Game</title>
   <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet"/>
  <style>
    :root{--brand:#4c221f;--accent:#feb141;--accent-2:#fd7e6b;--blue:#1b78cb;--btn-blue:#92e0ff;}
    body{margin:0;padding:0;background:#fff7dd;font-family:'Baloo 2',Arial,sans-serif;}
    .screen{display:none;width:100vw;min-height:100vh;padding:18px;box-sizing:border-box;flex-direction:column;align-items:center;justify-content:center;}
    .screen.active{display:flex;}
    h1{font-size:3rem;color:var(--brand);text-align:center;}
    /* Learning Module */
    #learningWrap{width:min(900px,92vw);background:#fff9e5;border-radius:22px;box-shadow:0 8px 26px #ffd76e7a;padding:16px 18px 26px;color:#4a3000;}
    #learningWrap h2{margin:2px 0 12px;font-size:1.7rem;text-align:center;}
    table{width:100%;border-collapse:collapse;font-size:1.15rem;}
    th,td{padding:9px 12px;border:1.5px solid #ffd578;text-align:left;}
    th{background:#ffc844;color:#561f00;}
    td{background:#ffefb1;}
    tr:hover td{background:#ffe77d;}
    .a-icon{font-size:3rem;margin-right:8px;}
    .big-btn{background:var(--accent);color:#fff;font-size:2.1rem;font-weight:800;padding:18px 48px;border:none;border-radius:22px;box-shadow:0 8px 28px #ffc63452;cursor:pointer;transition:.22s;user-select:none;outline:none;}
    .big-btn:hover,.big-btn:focus{background:var(--accent-2);outline:none;}
    /* Game */
    #scoreBar{font-size:2rem;font-weight:800;color:#bb6d01;margin:8px 0 22px;}
    .card{width:min(380px,90vw);height:500px;border-radius:38px;background:#fff8de;box-shadow:0 10px 39px #efcc4bae;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:32px;}
    .ico{font-size:15rem;margin-bottom:14px;}
    .answers{display:flex;flex-wrap:nowrap;justify-content:center;gap:24px;max-width:min(790px,98vw);overflow-x:auto;padding:7px 2px 13px;}
    .answers::-webkit-scrollbar{display:none;}
    .answers{scrollbar-width:none;}
    .ans{background:var(--btn-blue);color:#1c74b2;min-width:165px;padding:18px 25px;font-size:1.45rem;font-weight:800;border:none;border-radius:18px;box-shadow:0 6px 18px #79d1fe74;cursor:pointer;user-select:none;outline:none;flex-shrink:0;display:flex;align-items:center;justify-content:center;gap:10px;}
    .ans:hover,.ans:focus{background:var(--blue);color:#fff;box-shadow:0 10px 22px #6c9cfa9a;}
    #feedback{min-height:38px;font-size:1.28rem;font-weight:800;text-align:center;color:#c92b3d;letter-spacing:.014em;}
    #feedback.correct{color:#2d8d39;}#feedback.wrong{color:#d91f4c;}
    @keyframes bounce{0%{transform:scale(1);}30%{transform:scale(1.13);}60%{transform:scale(.95);}100%{transform:scale(1);}}
    @keyframes shake{0%{transform:translateX(0);}20%{transform:translateX(-13px);}40%{transform:translateX(13px);}60%{transform:translateX(-13px);}80%{transform:translateX(13px);}100%{transform:translateX(0);}}
    .bounce{animation:bounce .72s;}
    .shake{animation:shake .5s;}
    /* End / Victory */
    .end{background:#140b2e;color:#fff;text-align:center;}
    .victory{background:#ffaf48;border-radius:38px;box-shadow:0 10px 54px #deac0596;padding:32px 30px 28px;width:min(410px,93vw);position:relative;}
    .cup{font-size:4rem;position:absolute;left:50%;top:-46px;transform:translateX(-50%);text-shadow:0 4px 18px #ffd26077;}
    .ribbon{background:#fc7c2f;color:#fff;font-size:1.7rem;font-weight:900;width:73%;margin:27px auto 16px;border-radius:23px;padding:9px 0;letter-spacing:.11em;user-select:none;}
    .stat{color:#6a4300;font-size:1.15rem;font-weight:800;}
    .endBtns{display:flex;gap:24px;justify-content:center;margin-top:21px;}
    .endBtns .btn{background:#30e4d3;color:#fff;font-size:1.2rem;border:none;border-radius:20px;padding:13px 29px;box-shadow:0 4px 13px #21bbbbbb;cursor:pointer;}
    .endBtns .exit{background:#f85359;box-shadow:0 4px 13px #eb4855bb;}
    .endBtns .btn:hover{background:#1cc9b4;}
    .endBtns .exit:hover{background:#be383f;}
    /* Animated Modal Well Done */
    .overlay{position:fixed;inset:0;z-index:10101;background:rgba(30,27,37,0.75);display:none;align-items:center;justify-content:center;}
    .overlay.show{display:flex;}
    .wdbox{background:#fffae8;border-radius:33px;box-shadow:0 8px 90px #ffd143bb;width:min(426px,96vw);padding:54px 24px 34px 24px;position:relative;text-align:center;}
    .party-hat{position:absolute;top:9px;left:42%;width:74px;height:74px;background:linear-gradient(-25deg,#fc2d55 36%,#ffce38 52%);border-radius:30% 50% 65% 50%/80% 68% 80% 80%;transform:rotate(-16deg);animation:hatwig 1.9s ease-in-out infinite alternate;}
    @keyframes hatwig{0%{transform:rotate(-20deg);}100%{transform:rotate(-4deg);}}
    .lolly{position:absolute;top:30px;left:10px;width:38px;height:38px;border-radius:50%;background:#ffe933;border:5px solid #ffcc15;z-index:2;animation:lwig 1.8s infinite alternate;}
    .lolly2{left:auto;right:20px;top:30px;width:37px;height:37px;background:#ffe933;border-color:#ffd300;animation-delay:.9s;}
    @keyframes lwig{0%{transform:rotate(-14deg);}100%{transform:rotate(13deg);}}
    .spiral{position:absolute;top:23px;right:56px;width:44px;height:44px;border-radius:50%;background:repeating-radial-gradient(circle,#3824b5 18%,#fff 21% 27%,#3824b5 29% 44%,#fff 48% 51%,#3824b5 54%);}
    .star{position:absolute;right:10px;top:49px;width:30px;height:30px;background:yellow;clip-path: polygon(50% 0%,61% 33%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 33%);box-shadow:0 0 12px #ffe150,0 3px 5px #fc2;}
    .swirls{position:absolute;bottom:68px;left:19px;display:flex;gap:12px;}
    .swr{width:22px;height:22px;border-radius:50%;background:repeating-linear-gradient(60deg,#ea2d3b 11%,#fff 17% 27%,#ea2d3b 37%);}
    .swy{width:20px;height:20px;background:repeating-linear-gradient(47deg,#ffef4f 17%,#fff 13% 36%,#ffef4f 40%);}
    .confetti{position:absolute;bottom:22px;left:50%;transform:translateX(-50%);}
    .confetti span{display:inline-block;width:19px;height:19px;font-size:1.1rem;opacity:.85;animation:fall 1.4s infinite;}
    .confetti .f1{animation-delay:.19s;}
    .confetti .f2{animation-delay:.36s;}
    .confetti .f3{animation-delay:.57s;}
    .confetti .f4{animation-delay:.81s;}
    @keyframes fall{0%{transform:translateY(-12px)rotate(0);}60%{transform:translateY(17px)rotate(26deg);}100%{transform:translateY(0)rotate(0);}}
    .well-done-txt{margin-top:108px;background:var(--accent);color:#2d3787;font-size:2.3rem;font-weight:900;border-radius:20px;padding:19px 8px 13px;letter-spacing:.08em;box-shadow:0 4px 20px #ffe93881;animation:jmp 1.2s infinite alternate;}
    @keyframes jmp{0%{transform:translateY(0)scale(1);}50%{transform:translateY(-12px)scale(1.12);}100%{transform:translateY(0)scale(1);}}
    .ok{margin-top:26px;background:var(--blue);color:#fff;border:none;border-radius:16px;font-size:1.25rem;font-weight:800;padding:14px 38px;cursor:pointer;box-shadow:0 6px 13px #2034aa3c;}
    .ok:hover,.ok:focus{background:#3f4899;outline:none;}
    @media(max-width:560px){.card{height:150px;}.ico{font-size:3.3rem;}}
   
    body {
      margin: 0;
      padding: 0;
      background: #bde3ed;
      font-family: 'Baloo 2', Arial, sans-serif;
    }
    h1 {
      font-size: 3rem;
      color: #efad31;
      text-align: center;
      background: #fff7e0;
      margin: 0;
      padding: 28px 0 10px 0;
      border-radius: 0 0 28px 28px;
      box-shadow: 0 8px 24px #ffd66e44;
      letter-spacing: .07em;
    }
    .container {
      width: min(900px, 96vw);
      margin: 22px auto 0 auto;
      padding: 28px 16px;
      background: #e5f7fa;
      border-radius: 36px;
      box-shadow: 0 8px 48px #b8cad5a0;
    }
    .activity-row {
      display: flex;
      align-items: center;
      background: #fffde8;
      border-radius: 24px;
      margin: 18px 0;
      box-shadow: 0 4px 18px #fbe4b862;
      padding: 14px 24px;
      font-size: 1.6rem;
      position: relative;
      transition: box-shadow .2s;
    }
    .activity-row:hover {
      box-shadow: 0 6px 36px #fbe4b892;
      background: #ffeec6;
    }
    .activity-icon {
      font-size: 2.6rem;
      margin-right: 22px;
      flex-shrink: 0;
      border-radius: 50%;
      background: #f6f2cd;
      padding: 6px 14px;
      box-shadow: 0 0 8px #efefca50;
      border: 3px solid #ffe297;
    }
    .activity-title {
      font-weight: 700;
      color: #5b3830;
      margin-right: 16px;
      flex: 1;
    }
    .activity-time {
      display: flex;
      align-items: center;
      font-size: 1.25rem;
      color: #3b789e;
      background: #c7f2fd;
      border-radius: 18px;
      padding: 6px 18px;
      min-width: 120px;
      justify-content: center;
      box-shadow: 0 2px 10px #7dd9f670;
    }
    /* Decorative clouds and landscape for poster style */
    .cloud {
      position: absolute;
      top: -18px;
      right: -40px;
      width: 80px;
      height: 34px;
      background: #fff;
      border-radius: 40px;
      box-shadow: 22px 0 0 #fff, 50px 0 0 #fff;
      opacity: 0.23;
      z-index: 0;
    }
 canvas {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    pointer-events: none;
  }
  
  </style>
</head>
<body>

<section id="learn" class="screen active" aria-label="Learning module">
  <title>My Daily Adventures</title>
<h1>Learn Your Daily Routine</h1>
  <div id="learningWrap">
    <h2>Activities and Their Time of Day</h2>
    <table>
      <thead><tr><th>Activity</th><th>Time of Day</th></tr></thead>
      <tbody id="learnBody"></tbody>
    </table>
    <div style="display:flex;justify-content:center;margin-top:20px;">
      <button id="startLearn" class="big-btn" aria-label="Start game">Start Game 🚀</button>
    </div>
  </div>
</section>

<section id="game" class="screen" aria-label="Game screen" tabindex="0">
  <div id="scoreBar" aria-live="polite">Score: 0 / 12</div>
  <div id="card" class="card" aria-live="polite" aria-atomic="true">
    <div id="ico" class="ico" aria-hidden="true">🍳</div>
    <div id="txt">Eat Breakfast</div>
  </div>
  <div id="answers" class="answers" role="group" aria-label="Answer choices"></div>
  <div id="feedback" aria-live="assertive"></div>
  <button id="quit" class="big-btn" style="font-size:1.3rem;padding:14px 29px;">Quit</button>
</section>

<section id="end" class="screen end" aria-label="End screen">
  <div class="victory" role="region" aria-labelledby="victoryTitle">
    <div class="cup" aria-hidden="true">🏆</div>
    <div id="victoryTitle" class="ribbon">VICTORY</div>
    <div id="matchStat" class="stat">You matched X/Y correctly!</div>
    <div id="finalStat" class="stat" style="margin-top:6px;">Final Score: 0</div>
    <div class="endBtns">
      <button id="replay" class="btn">Replay 🔄</button>
      <button id="exit" class="btn exit">Exit 🚪</button>
    </div>
  </div>
</section>
<canvas id="canvas"></canvas>
<!-- Well Done Modal -->
<div id="modal" class="overlay" role="dialog" aria-modal="true" aria-labelledby="wdTitle">
  <div class="wdbox">
    <div class="party-hat"></div>
    <div class="lolly"></div>
    <div class="lolly lolly2"></div>
    <div class="spiral"></div>
    <div class="star"></div>
    <div class="swirls">
      <div class="swr"></div>
      <div class="swy"></div>
    </div>
    <div class="well-done-txt" id="wdTitle">WELL DONE!</div>
    <div class="confetti">
      <span class="f1">🎉</span><span class="f2">🎊</span><span class="f3">💛</span><span class="f4">🟡</span>
    </div>
    <button id="ok" class="ok">OK</button>
  </div>
</div>

<audio id="sndCorrect" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="sndWrong"   src="https://actions.google.com/sounds/v1/cartoon/slide_whistle_to_drum_hit.ogg"></audio>
<audio id="sndClick"   src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>


<script>
(function(){
  // Data
  const activities = [
    { text:"Brush Teeth",      icon:"🪥", time:"morning"   },
    { text:"Eat Breakfast",    icon:"🍳", time:"morning"   },
    { text:"Go to School",     icon:"🎒", time:"morning"   },
    { text:"Eat Lunch",        icon:"🍎", time:"afternoon" },
    { text:"Study/Do Homework",icon:"📚", time:"afternoon" },
    { text:"Play Outside",     icon:"⚽", time:"afternoon" },
    { text:"Eat Dinner",       icon:"🍽️", time:"evening"  },
    { text:"Watch TV",         icon:"📺", time:"evening"   },
    { text:"Take a Bath",      icon:"🛁", time:"morning"   },
    { text:"Brush Teeth",      icon:"🪥", time:"morning"     },
    { text:"Read Storybook",   icon:"📖", time:"night"     },
    { text:"Go to Bed",        icon:"😴", time:"night"     }
  ];
  const answerOpts = [
    {label:"Morning ", icon:"☀️",   val:"morning"},
    {label:"Afternoon ",  icon:"🌤", val:"afternoon"},
    {label:"Evening ", icon:"🌆",   val:"evening"},
    {label:"Night ",icon:"🌙",     val:"night"}
  ];

  // Elements
  const scrLearn = document.getElementById('learn');
  const scrGame  = document.getElementById('game');
  const scrEnd   = document.getElementById('end');
  const learnBody= document.getElementById('learnBody');
  const startBtn = document.getElementById('startLearn');
  const ico = document.getElementById('ico');
  const txt = document.getElementById('txt');
  const card= document.getElementById('card');
  const answers = document.getElementById('answers');
  const feedback= document.getElementById('feedback');
  const scoreBar= document.getElementById('scoreBar');
  const btnQuit = document.getElementById('quit');
  const statMatch= document.getElementById('matchStat');
  const statFinal= document.getElementById('finalStat');
  const btnReplay= document.getElementById('replay');
  const btnExit  = document.getElementById('exit');
  const modal = document.getElementById('modal');
  const okBtn = document.getElementById('ok');
  // Sounds
  const S = {
    correct: document.getElementById('sndCorrect'),
    wrong  : document.getElementById('sndWrong'),
    click  : document.getElementById('sndClick'),
  };
function startGame(){
  S.click.play();
  score=0;
  order = shuffle([...Array(activities.length).keys()]);
  show(scrGame);
  loadQ(0);
}
  // Utilities
  function cap(s){return s.charAt(0).toUpperCase()+s.slice(1);}
  function speak(t){
    if(!('speechSynthesis' in window)) return;
    const u = new SpeechSynthesisUtterance(t);
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(u);
  }
  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }
  function show(screen){
    [scrLearn,scrGame,scrEnd].forEach(s=>s.classList.remove('active'));
    screen.classList.add('active');
  }

  // Populate learning
  function populateLearning(){
    const frag = document.createDocumentFragment();
    activities.forEach(a=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td><span class="a-icon">${a.icon}</span>${a.text}</td><td>${cap(a.time)}</td>`;
      frag.appendChild(tr);
    });
    learnBody.innerHTML = "";
    learnBody.appendChild(frag);
  }
  populateLearning();
 
  // Game state
  let order=[], idx=0, score=0, waiting=false;
  function updateScore(){ scoreBar.textContent = `Score: ${score} / ${activities.length}`; }

  function loadQ(i){
    if(i>=order.length){ endGame(); return; }
    idx=i; waiting=false;
    const a = activities[order[i]];
    ico.textContent = a.icon;
    txt.textContent = a.text;
    feedback.textContent = "";
    updateScore();
    answers.innerHTML = "";
    answerOpts.forEach(opt=>{
      const b = document.createElement('button');
      b.className = 'ans';
      b.textContent = opt.label;
      b.addEventListener('click',()=>{ if(waiting) return; S.click.play(); speak(opt.label); check(opt.val,a); });
      b.addEventListener('mouseenter',()=>speak(opt.label));
      b.addEventListener('focus',()=>speak(opt.label));
      answers.appendChild(b);
    });
    speak(a.text);
  }
  function check(val,a){
    if(val===a.time){
      launchFireworks();
      S.correct.currentTime=0; S.correct.play();
      feedback.textContent = `Correct! ${a.text} is a ${cap(a.time)} activity.`;
      feedback.className = 'correct'; card.classList.remove('shake'); card.classList.add('bounce');
      score++; updateScore();
      showWellDone(); // show modal alert
    }else{
      S.wrong.currentTime=0; S.wrong.play();
      feedback.textContent = `❌ Try Again! ${a.text} is not ${cap(val)}.`;
      feedback.className = 'wrong'; card.classList.remove('bounce'); card.classList.add('shake');
    }
  }
  
  function endGame(){
    show(scrEnd);
    statMatch.textContent = `You matched ${score} / ${activities.length} correctly!`;
    statFinal.textContent = `Final Score: ${score*100}`;
  }
  function showWellDone(){
    
    waiting=true;
    card.classList.remove('bounce');
    modal.classList.add('show');
    S.well.currentTime=0; S.well.play();
    speak('Well done!');
  }
  okBtn.addEventListener('click', ()=>{
    modal.classList.remove('show');
    loadQ(idx+1);
  });

  startBtn.addEventListener('click',()=>{
    S.click.play();
    score=0; order = shuffle([...Array(activities.length).keys()]); show(scrGame); loadQ(0);
  });
  btnQuit.addEventListener('click',()=>{ S.click.play(); endGame(); });
  btnReplay.addEventListener('click',()=>{ S.click.play(); score=0; order=shuffle([...Array(activities.length).keys()]); show(scrGame); loadQ(0); });
  btnExit.addEventListener('click',()=>{ S.click.play(); show(scrLearn); });

  show(scrLearn);
})();
 const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  let cw, ch;
  function resize() {
    cw = canvas.width = window.innerWidth;
    ch = canvas.height = window.innerHeight;
  }
  window.onresize = resize;
  resize();

  class Particle {
    constructor(x, y, color, angle, speed) {
      this.x = x;
      this.y = y;
      this.color = color;
      this.angle = angle;
      this.speed = speed;
      this.alpha = 1;
      this.size = 4 + Math.random() * 3;
      this.decay = 0.015 + Math.random() * 0.015;
      this.gravity = 0.15;
      this.vx = Math.cos(angle) * speed;
      this.vy = Math.sin(angle) * speed;
    }
    update() {
      this.vy += this.gravity;
      this.x += this.vx;
      this.y += this.vy;
      this.alpha -= this.decay;
    }
    draw(ctx) {
      if (this.alpha <= 0) return;
      ctx.save();
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = this.color;
      ctx.shadowColor = this.color;
      ctx.shadowBlur = 20;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    }
  }

  class Firework {
    constructor() {
      this.x = Math.random() * cw * 0.8 + cw * 0.1;
      this.y = ch + 10;
      this.targetY = Math.random() * ch * 0.5 + ch * 0.1;
      this.speed = 5 + Math.random() * 3;
      this.isExploded = false;
      this.particles = [];
      this.color = `hsl(${Math.floor(Math.random() * 360)}, 100%, 65%)`;
    }
    update() {
      if (!this.isExploded) {
        this.y -= this.speed;
        if (this.y <= this.targetY) {
          this.explode();
        }
      } else {
        this.particles.forEach(p => p.update());
        this.particles = this.particles.filter(p => p.alpha > 0);
      }
    }
    explode() {
      this.isExploded = true;
      const count = 150;
      for (let i = 0; i < count; i++) {
        const angle = Math.random() * 2 * Math.PI;
        const speed = Math.random() * 6 + 2;
        this.particles.push(new Particle(this.x, this.y, this.color, angle, speed));
      }
    }
    draw(ctx) {
      if (!this.isExploded) {
        ctx.save();
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 15;
        ctx.arc(this.x, this.y, 6, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      } else {
        this.particles.forEach(p => p.draw(ctx));
      }
    }
    isDone() {
      return this.isExploded && this.particles.length === 0;
    }
  }

  let fireworks = [];
  let animationId;

  function animate() {
    ctx.clearRect(0, 0, cw, ch);
    fireworks.forEach((fw, i) => {
      fw.update();
      fw.draw(ctx);
      if (fw.isDone()) fireworks.splice(i, 1);
    });
    animationId = requestAnimationFrame(animate);
  }

  function launchFireworks() {
    fireworks = [];
    let launchDuration = 1500;
    const interval = 300;
    let elapsed = 0;
    const launchInterval = setInterval(() => {
      fireworks.push(new Firework());
      elapsed += interval;
      if (elapsed >= launchDuration) {
        clearInterval(launchInterval);
        setTimeout(() => cancelAnimationFrame(animationId), 2000);
      }
    }, interval);
    animate();
  }
</script>
</body>
